Процедура ОбработкаПроведения(Отказ,Режим)
	// регистр РезультатВыполненияУпражнений
	Движения.РезультатВыполненияУпражнений.Записывать = Истина;
	Для Каждого ТекСтрокаНормативы из Нормативы Цикл
		Движение = Движения.РезультатВыполненияУпражнений.Добавить();
		Движение.Период = Дата;
		Движение.Организация = Организация;
		Движение.ФизЛицо = ТекСтрокаНормативы.ФизЛицо;
		Движение.Норматив = ТекСтрокаНормативы.Норматив;
		Движение.ДатаПроведения = Дата;
		Движение.Результат = ТекСтрокаНормативы.Результат;


		ВозрастнаяГруппа = УправлениеНормативами.ОпределитьВозрастнуюГруппу(ТекСтрокаНормативы.ФизЛицо, Дата);
		Если ВозрастнаяГруппа = Неопределено Тогда
			Сообщить("Не определена возрастная группа для: " + ТекСтрокаНормативы.ФизЛицо);
			Продолжить;
		КонецЕсли;
				
		НайденныеНормативы = УправлениеНормативами.НайтиНорматив(ТекСтрокаНормативы.Норматив, ВозрастнаяГруппа, Дата);
		Если НайденныеНормативы.Количество() = 0 Тогда
			Сообщить("Не найдены нормативы для: " + ТекСтрокаНормативы.Норматив);
		    Продолжить;
		КонецЕсли;
		
		Оценка = УправлениеНормативами.РассчитатьОценку(ТекСтрокаНормативы.Результат, НайденныеНормативы);
		
		НормативДляОценки = УправлениеНормативами.ПолучитьНормативПоОценке(НайденныеНормативы, Оценка);
		
		Движение.Оценка = Оценка;
		Движение.ВозрастнаяГруппа = ВозрастнаяГруппа;
		
		Если НормативДляОценки <> Неопределено Тогда
			Движение.МинимальноеЗначение = НормативДляОценки.МинимальноеЗначение;
			Движение.МаксимальноеЗначение = НормативДляОценки.МаксимальноеЗначение;
		КонецЕсли;	
	КонецЦикла;

КонецПроцедуры
	